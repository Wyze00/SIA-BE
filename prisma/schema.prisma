generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  mahasiswa
  dosen
  admin
}

enum Jurusan {
  informatika
  dkv
  industri
  akuntansi
  olb
  management
  si
}

model User {
  id       String @id @db.VarChar(10)
  role     Role
  password String @db.VarChar(100)
  name     String @db.VarChar(100)

  admin     Admin?
  dosen     Dosen?
  mahasiswa Mahasiswa?

  @@map("users")
}

model Mahasiswa {
  nim      String  @id @db.VarChar(10)
  jurusan  Jurusan
  semester Int     @db.TinyInt
  name     String  @db.VarChar(100)
  angkatan String  @db.Char(4)
  user     User    @relation(fields: [nim], references: [id])

  @@map("mahasiswa")
}

model Dosen {
  nip  String @id @db.VarChar(10)
  name String @db.VarChar(100)
  user User   @relation(fields: [nip], references: [id])

  matkul Matkul[]
  @@map("dosen")
}

model Admin {
  id_admin   String @id @db.VarChar(10)
  departemen String @db.VarChar(100)
  name       String @db.VarChar(100)
  user       User   @relation(fields: [id_admin], references: [id])

  @@map("admin")
}

model Matkul {
  kode_matkul String @id @db.VarChar(10)
  dosen_nip String @db.VarChar(10)
  name String @db.VarChar(50)
  total_pertemuan Int
  total_sks Int

  dosen Dosen @relation(fields: [dosen_nip], references: [nip])
  @@map("matkul")
}

